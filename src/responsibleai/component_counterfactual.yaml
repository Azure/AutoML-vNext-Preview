name: AzureMLModelAnalysisCounterfactual
display_name: Counterfactual with azureml-responsibleai
version: VERSION_REPLACEMENT_STRING
type: command_component

inputs:
  comment:
    type: string
  surrogacy_info:
    type: path
  total_CFs:
    type: integer
    default: 10
  method:
    type: string # Enum
    default: random
  desired_class:
    type: string # Or int
    default: 0
  desired_range:
    type: string # JSON encoded list
    default: 'null'
  permitted_range:
    type: string # JSON encoded dict
    default: 'null'
  features_to_vary:
    type: string # Or JSON encoded list
    default: all
  feature_importance:
    type: boolean
    default: False

code:
  local_path: ./rai_analyse/

environment: azureml:AML-RAI-Environment:VERSION_REPLACEMENT_STRING

command: >-
  python create_counterfactual.py
  --comment '${{inputs.comment}}'
  --surrogacy_info ${{inputs.surrogacy_info}}
  --total_CFs ${{inputs.total_CFs}}
  --method ${{inputs.method}}
  --desired_class ${{inputs.desired_class}}
  --desired_range '${{inputs.desired_range}}'
  --permitted_range '${{inputs.permitted_range}}'
  --features_to_vary '${{inputs.features_to_vary}}'
  --feature_importance '${{inputs.feature_importance}}'
